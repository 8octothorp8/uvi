<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>uvi</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, black, #222);
      color: white;
      min-height: 100vh;
    }

    header {
      display: flex;
      align-items: center;
      padding: 10px 20px;
    }

    header img {
      height: 40px;
      margin-right: 20px;
    }

    .search-bar {
      display: flex;
      flex: 1;
      height: 45px;
    }

    .search-bar input[type="text"],
    .search-bar input[type="number"] {
      background: black;
      border: 2px solid white;
      color: white;
      border-radius: 20px;
      padding: 0 12px;
      font-size: 16px;
    }

    .search-bar input[type="text"] {
      flex: 9;
      margin-right: 10px;
    }

    .search-bar input[type="number"] {
      flex: 1;
    }

    #results {
      padding: 20px;
    }

    .movie-details {
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }

    .movie-details img {
      max-width: 300px;
      border-radius: 8px;
    }

    .info {
      max-width: 600px;
    }

    .info h2 {
      margin: 0;
      font-size: 28px;
    }

    .play-button {
      margin-top: 20px;
      padding: 10px 20px;
      border-radius: 25px;
      background: black;
      color: white;
      border: 2px solid white;
      font-size: 18px;
      cursor: pointer;
    }

    iframe {
      width: 100%;
      height: 500px;
      margin-top: 20px;
      border: none;
    }

    .spacer {
      height: 1000px;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="uvi logo">
    <form id="search-form" class="search-bar">
      <input type="text" id="search-input" placeholder="Search title...">
      <input type="number" id="year-input" placeholder="Year">
    </form>
  </header>

  <main id="results"></main>

  <script>
    const form = document.getElementById('search-form');
    const searchInput = document.getElementById('search-input');
    const yearInput = document.getElementById('year-input');
    const results = document.getElementById('results');
    const apiKey = "f9948667";

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const query = searchInput.value.trim();
      const year = yearInput.value.trim();
      if (!query) return;

      let url = `https://www.omdbapi.com/?t=${encodeURIComponent(query)}&plot=full&apikey=${apiKey}`;
      if (year) url += `&y=${encodeURIComponent(year)}`;

      const response = await fetch(url);
      const data = await response.json();

      if (data.Response === "True") {
        results.innerHTML = `
          <div class="movie-details">
            <img src="${data.Poster}" alt="${data.Title}">
            <div class="info">
              <h2><b>${data.Title}</b></h2>
              <p>${data.Year} | ${data.Rated} | ${data.Genre}</p>
              <p>${data.Plot}</p>
              ${data.Type === "movie" ? `<button class="play-button">â–¶ Play</button>` : ""}
            </div>
          </div>
        `;

        const playButton = document.querySelector('.play-button');
        if (playButton) {
          playButton.addEventListener('click', () => {
            results.innerHTML += `
              <iframe src="https://vidfast.pro/movie/${data.imdbID}" allowfullscreen></iframe>
              <div class="spacer"></div>
            `;
          });
        }
      } else {
        results.innerHTML = "<p>Movie not found.</p>";
      }
    });

    // Autofocus search bar on page load
    window.onload = () => searchInput.focus();
  </script>
</body>
</html>
